{"version":3,"sources":["containers/Joystick/Joystick.module.css","components/Header/Header.module.css","containers/App/App.module.css","containers/Board/Board.module.css","components/Notification/Notification.module.css","assets/images/lollipop.svg","assets/images/ice_cream.svg","assets/images/logo.svg","assets/audio/maze.mp3","assets/audio/level_end.mp3","components/Header/Header.js","components/Notification/Notification.js","utils/arrayUtils.js","utils/constants.js","utils/random.js","maze/Maze.js","maze/MazeGenerator.js","containers/Board/Board.js","hooks/useKey.js","containers/Joystick/Joystick.js","containers/App/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","hiScore","time","points","round","className","styles","row","score","toString","padStart","stats","responsiveScore","Notification","show","gameOver","root","arraysEqual","a","b","length","i","KEYBOARD","MAZE_PRIZES","name","image","lollipopImage","iceCreamImage","getRandInt","min","max","Math","floor","random","Maze","rows","cols","cells","startCell","endCell","randomCellsAmount","this","randomCells","Set","size","randomCell","getRandomCell","add","map","cell","split","splittedCell","parseInt","x","y","currentCell","action","newPos","currCellWalls","getCell","Error","isValid","findIndex","getPrizeCellIndex","Cell","walls","visited","MazeGenerator","pickRandomCellsAmount","stack","grid","push","current","neighbors","filter","c","next","dx","dy","checkNeighbors","removeWallsBetweenCurrentAnd","carve","pop","createGrid","Board","maze","prizes","forwardedRef","canvas","useRef","useState","undefined","ctx","setCtx","displayGoal","setDisplayGoal","onResize","useCallback","offsetWidth","offsetHeight","width","height","useEffect","getContext","window","addEventListener","removeEventListener","didCancel","drawLine","x1","y1","strokeStyle","beginPath","moveTo","lineTo","stroke","fillStyle","fillRect","blockWidth","blockHeight","xOffset","generateImage","img","logoSize","Image","onload","drawImage","src","generateText","text","color","textSize","font","textBaseline","fillText","logoImage","forEach","prize","isTaken","takenTime","Date","draw","useInterval","oldDisplayState","ref","noop","useKey","keys","actionRef","onKeyDown","event","includes","key","preventDefault","Joystick","handleOnArrowKeyPressed","clsx","button","left","onClick","arrow","leftArrow","right","rightArrow","top","upArrow","bottom","downArrow","reducer","state","type","payload","visitedCells","isGoalReached","index","removeIndex","p","idx","isVisited","has","mazeAudio","Audio","mazeAudioFile","loop","levelEndAudio","mazeLevelEndAudioFile","App","useReducer","dispatch","container","isGameOver","handleOnEnterKeyPressed","generate","validateStep","prizeIndex","pause","currentTime","play","onFinishAudio","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.47d2306d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Joystick_root__K-teG\",\"arrow\":\"Joystick_arrow__1CSpF\",\"rightArrow\":\"Joystick_rightArrow__3hvVx\",\"leftArrow\":\"Joystick_leftArrow__3wyHF\",\"upArrow\":\"Joystick_upArrow__zy6IG\",\"downArrow\":\"Joystick_downArrow__2wwUF\",\"button\":\"Joystick_button__1V2b4\",\"left\":\"Joystick_left__2VhMD\",\"right\":\"Joystick_right__3VFBa\",\"top\":\"Joystick_top__s0NgF\",\"bottom\":\"Joystick_bottom__2zNMh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"Header_row__3nAfu\",\"score\":\"Header_score__d2DrR\",\"stats\":\"Header_stats__1vdt3\",\"responsiveScore\":\"Header_responsiveScore__pXxo6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"App_root__33b96\",\"container\":\"App_container__2WP0Q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Board_root__1mqwi\",\"canvas\":\"Board_canvas__3kXBv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Notification_root__2LX0b\"};","module.exports = __webpack_public_path__ + \"static/media/lollipop.5bf858ee.svg\";","module.exports = __webpack_public_path__ + \"static/media/ice_cream.c760f5dc.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.f342226d.svg\";","module.exports = __webpack_public_path__ + \"static/media/maze.12c141ff.mp3\";","module.exports = __webpack_public_path__ + \"static/media/level_end.3931d957.mp3\";","import React from 'react';\r\nimport styles from './Header.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Header({ hiScore, time, points, round }) {\r\n  const formatTime = () => {\r\n    return time || time === 0 ? time.toString().padStart(2, ' ') : null;\r\n  };\r\n\r\n  return (\r\n    <header>\r\n      <div className={styles.row}>\r\n        <p>Welcome to the StorrSoft maze!</p>\r\n        <p>\r\n          Hi-Score <span className={styles.score}>{hiScore.toString().padStart(5, ' ')}</span>\r\n        </p>\r\n      </div>\r\n      <div className={styles.stats}>\r\n        <p>\r\n          1UP <span className={styles.score}>{points.toString().padStart(5, ' ')}</span>&nbsp;&nbsp;\r\n          ROUND <span className={styles.score}>{round.toString().padStart(3, ' ')}</span>&nbsp;&nbsp;\r\n          TIME <span className={styles.score}>{formatTime()}</span>&nbsp;&nbsp;\r\n        </p>\r\n        <p className={styles.responsiveScore}>\r\n          Hi-Score <span className={styles.score}>{hiScore.toString().padStart(5, ' ')}</span>\r\n        </p>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  time: PropTypes.number,\r\n  hiScore: PropTypes.number.isRequired,\r\n  points: PropTypes.number.isRequired,\r\n  round: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport styles from './Notification.module.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction Notification({ show, gameOver }) {\r\n  return (\r\n    show && (\r\n      <div className={styles.root}>\r\n        {gameOver ? <p>GAME OVER</p> : null}\r\n        PRESS <kbd>Enter</kbd> TO START\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nNotification.propTypes = {\r\n  show: PropTypes.bool.isRequired,\r\n  gameOver: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default Notification;\r\n","export const arraysEqual = (a, b) => {\r\n  if (a === b) return true;\r\n  if (a == null || b == null) return false;\r\n  if (a.length !== b.length) return false;\r\n\r\n  for (let i = 0; i < a.length; ++i) {\r\n    if (a[i] !== b[i]) return false;\r\n  }\r\n\r\n  return true;\r\n}\r\n","import lollipopImage from '../assets/images/lollipop.svg';\r\nimport iceCreamImage from '../assets/images/ice_cream.svg';\r\n\r\nexport const ROUND_TIME = 60;\r\nexport const MOVEMENT_REWARD = 10;\r\nexport const ROWS = 17;\r\nexport const COLS = 33;\r\n// export const ROWS = 5;\r\n// export const COLS = 3;\r\n\r\nexport const KEYBOARD = {\r\n  Enter: 'Enter',\r\n  Left: 'ArrowLeft',\r\n  Right: 'ArrowRight',\r\n  Up: 'ArrowUp',\r\n  Down: 'ArrowDown',\r\n};\r\n\r\nexport const MAZE_PRIZES = [\r\n  {\r\n    name: 'Lollipop',\r\n    image: lollipopImage,\r\n    points: 2000,\r\n  },\r\n  {\r\n    name: 'IceCream',\r\n    image: iceCreamImage,\r\n    points: 5000,\r\n  },\r\n];\r\n","export function getRandInt(min, max) {\r\n  return Math.floor(Math.random() * (max - min) + min);\r\n}\r\n","import { arraysEqual } from '../utils/arrayUtils';\r\nimport { KEYBOARD } from '../utils/constants';\r\nimport { getRandInt } from '../utils/random';\r\n\r\nclass Maze {\r\n  constructor(rows, cols, cells, startCell, endCell, randomCellsAmount) {\r\n    this.rows = rows;\r\n    this.cols = cols;\r\n    this.cells = cells;\r\n    this.startCell = startCell;\r\n    this.endCell = endCell;\r\n\r\n    const randomCells = new Set();\r\n    while(randomCells.size < randomCellsAmount) {\r\n      const randomCell = this.getRandomCell();\r\n      if (arraysEqual(randomCell, startCell) || arraysEqual(randomCell, endCell))\r\n        continue;\r\n\r\n      randomCells.add(randomCell.toString());\r\n    }\r\n    this.randomCells = [...randomCells].map((cell) =>\r\n      cell.split(',').map((splittedCell) => parseInt(splittedCell, 10))\r\n    );\r\n  }\r\n\r\n  getCell(x, y) {\r\n    return this.cells[x + y * this.cols];\r\n  }\r\n\r\n  getRandomCell() {\r\n    return [getRandInt(0, this.cols), getRandInt(0, this.rows)];\r\n  }\r\n\r\n  validateStep(currentCell, action) {\r\n    const newPos = [...currentCell];\r\n    const currCellWalls = this.getCell(...currentCell);\r\n    switch (action) {\r\n      case KEYBOARD.Left:\r\n        if (currentCell[0] - 1 >= 0 && !currCellWalls[3])\r\n          newPos[0] = currentCell[0] - 1;\r\n        break;\r\n      case KEYBOARD.Right:\r\n        if (currentCell[0] + 1 < this.cols && !currCellWalls[1])\r\n          newPos[0] = currentCell[0] + 1;\r\n        break;\r\n      case KEYBOARD.Up:\r\n        if (currentCell[1] - 1 >= 0 && !currCellWalls[0])\r\n          newPos[1] = currentCell[1] - 1;\r\n        break;\r\n      case KEYBOARD.Down:\r\n        if (currentCell[1] + 1 < this.rows && !currCellWalls[2])\r\n          newPos[1] = currentCell[1] + 1;\r\n        break;\r\n      default:\r\n        throw new Error('Unknown key action');\r\n    }\r\n\r\n    return {\r\n      isValid: !arraysEqual(currentCell, newPos),\r\n      newPos,\r\n    };\r\n  }\r\n  \r\n  isGoalReached(currentCell) {\r\n    return arraysEqual(currentCell, this.endCell);\r\n  }\r\n\r\n  getPrizeCellIndex(currentCell) {\r\n    return this.randomCells.findIndex(\r\n      (cell) => arraysEqual(cell, currentCell)\r\n    );\r\n  }\r\n\r\n  isPrizeCell(currentCell) {\r\n    return this.getPrizeCellIndex(currentCell) !== -1;\r\n  }\r\n}\r\n\r\nexport default Maze;\r\n","import Maze from './Maze';\r\n\r\nclass Cell {\r\n  constructor(x, y) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.walls = [true, true, true, true];\r\n    this.visited = false;\r\n  }\r\n}\r\n\r\nclass MazeGenerator {\r\n  constructor(rows, cols, pickRandomCellsAmount = 2) {\r\n    this.rows = rows;\r\n    this.cols = cols;\r\n    this.stack = [];\r\n    this.pickRandomCellsAmount = pickRandomCellsAmount;\r\n  }\r\n\r\n  createGrid() {\r\n    const grid = [];\r\n    for (let y = 0; y < this.rows; y++) {\r\n      for (let x = 0; x < this.cols; x++) {\r\n        grid.push(new Cell(x, y));\r\n      }\r\n    }\r\n    this.grid = grid;\r\n  }\r\n\r\n  getCell(y, x) {\r\n    if (x < 0 || y < 0 || x >= this.cols || y >= this.rows) {\r\n      return null;\r\n    }\r\n    return this.grid[x + y * this.cols];\r\n  }\r\n\r\n  checkNeighbors() {\r\n    const x = this.current.x;\r\n    const y = this.current.y;\r\n    const top = this.getCell(y - 1, x);\r\n    const right = this.getCell(y, x + 1);\r\n    const bottom = this.getCell(y + 1, x);\r\n    const left = this.getCell(y, x - 1);\r\n    const neighbors = [top, right, bottom, left].filter((c) => !!c && !c.visited);\r\n\r\n    if (neighbors.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    const r = Math.floor(Math.random() * neighbors.length);\r\n    return neighbors[r];\r\n  }\r\n\r\n  removeWallsBetweenCurrentAnd(next) {\r\n    const dx = this.current.x - next.x;\r\n    const dy = this.current.y - next.y;\r\n\r\n    if (dx === 1) {\r\n      this.current.walls[3] = false;\r\n      next.walls[1] = false;\r\n    } else if (dx === -1) {\r\n      this.current.walls[1] = false;\r\n      next.walls[3] = false;\r\n    }\r\n\r\n    if (dy === 1) {\r\n      this.current.walls[0] = false;\r\n      next.walls[2] = false;\r\n    } else if (dy === -1) {\r\n      this.current.walls[2] = false;\r\n      next.walls[0] = false;\r\n    }\r\n  }\r\n\r\n  carve() {\r\n    const next = this.checkNeighbors();\r\n    if (next) {\r\n      next.visited = true;\r\n      this.stack.push(this.current);\r\n      this.removeWallsBetweenCurrentAnd(next);\r\n      this.current = next;\r\n      this.carve();\r\n    } else if (this.stack.length > 0) {\r\n      this.current = this.stack.pop();\r\n      this.carve();\r\n    }\r\n  }\r\n\r\n  generate() {\r\n    this.createGrid();\r\n    this.current = this.grid[0];\r\n    this.current.visited = true;\r\n    this.carve();\r\n\r\n    this.grid[0].walls[3] = false;\r\n    this.getCell(this.rows - 1, this.cols - 1).walls[2] = false;\r\n\r\n    return new Maze(\r\n      this.rows,\r\n      this.cols,\r\n      this.grid.map((x) => x.walls),\r\n      [0, 0],\r\n      // [this.rows - 1, this.cols - 1], <-- it was a bug, since X Axis is num of columns\r\n      [this.cols - 1, this.rows - 1],\r\n      this.pickRandomCellsAmount\r\n    );\r\n  }\r\n}\r\n\r\nexport default MazeGenerator;\r\n","import React, { useCallback, useEffect, useRef, useState } from 'react';\r\nimport styles from './Board.module.css';\r\nimport PropTypes from 'prop-types';\r\nimport useInterval from '@use-it/interval';\r\nimport logoImage from '../../assets/images/logo.svg';\r\n\r\n// import lollipopImage from '../../assets/images/lollipop.svg';\r\n\r\nfunction Board({ maze, currentCell, prizes, forwardedRef }) {\r\n  const canvas = useRef(null);\r\n  const [ctx, setCtx] = useState(undefined);\r\n  const [displayGoal, setDisplayGoal] = useState(true);\r\n\r\n  const onResize = useCallback(() => {\r\n    const { offsetWidth, offsetHeight } = forwardedRef.current;\r\n    canvas.current.width = offsetWidth;\r\n    canvas.current.height = offsetHeight;\r\n  }, [forwardedRef]);\r\n\r\n  useEffect(() => {\r\n    setCtx(canvas.current.getContext('2d'));\r\n    onResize();\r\n    window.addEventListener('resize', onResize);\r\n    return () => window.removeEventListener('resize', onResize);\r\n  }, [onResize]);\r\n\r\n  useEffect(() => {\r\n    let didCancel = false;\r\n\r\n    const drawLine = (x1, y1, width, height) => {\r\n      ctx.strokeStyle = 'white';\r\n      ctx.beginPath();\r\n      ctx.moveTo(x1, y1);\r\n      ctx.lineTo(x1 + width, y1 + height);\r\n      ctx.stroke();\r\n    };\r\n\r\n    const draw = () => {\r\n      if (!maze) {\r\n        return;\r\n      }\r\n\r\n      ctx.fillStyle = 'black';\r\n      ctx.fillRect(0, 0, canvas.current.width, canvas.current.height);\r\n\r\n      const blockWidth = Math.floor(canvas.current.width / maze.cols);\r\n      const blockHeight = Math.floor(canvas.current.height / maze.rows);\r\n      const xOffset = Math.floor((canvas.current.width - maze.cols * blockWidth) / 2);\r\n\r\n      for (let y = 0; y < maze.rows; y++) {\r\n        for (let x = 0; x < maze.cols; x++) {\r\n          const cell = maze.cells[x + y * maze.cols];\r\n          if (y === 0 && cell[0]) {\r\n            drawLine(blockWidth * x + xOffset, blockHeight * y, blockWidth, 0);\r\n          }\r\n          if (cell[1]) {\r\n            drawLine(blockWidth * (x + 1) + xOffset, blockHeight * y, 0, blockHeight);\r\n          }\r\n          if (cell[2]) {\r\n            drawLine(blockWidth * x + xOffset, blockHeight * (y + 1), blockWidth, 0);\r\n          }\r\n          if (x === 0 && cell[3]) {\r\n            drawLine(blockWidth * x + xOffset, blockHeight * y, 0, blockHeight);\r\n          }\r\n        }\r\n      }\r\n\r\n      const generateImage = (x, y, img) => {\r\n        const logoSize = 0.75 * Math.min(blockWidth, blockHeight);\r\n        const image = new Image(logoSize, logoSize);\r\n        image.onload = () => {\r\n          if (didCancel)\r\n            return;\r\n          \r\n          ctx.drawImage(\r\n            image,\r\n            x * blockWidth + xOffset + (blockWidth - logoSize) / 2,\r\n            y * blockHeight + (blockHeight - logoSize) / 2,\r\n            logoSize,\r\n            logoSize\r\n          );\r\n        };\r\n\r\n        image.src = img;\r\n      };\r\n\r\n      const generateText = (x, y, text, color) => {\r\n        const textSize = Math.min(blockWidth, blockHeight);\r\n        ctx.fillStyle = color;\r\n        ctx.font = '20px \"Joystix\"';\r\n        ctx.textBaseline = 'top';\r\n\r\n        ctx.fillText(\r\n          text,\r\n          x * blockWidth + xOffset + (blockWidth - textSize) / 2,\r\n          y * blockHeight + (blockHeight - textSize) / 2,\r\n          textSize\r\n        );\r\n      };\r\n\r\n      generateImage(currentCell[0], currentCell[1], logoImage);\r\n\r\n      if (displayGoal) {\r\n        generateText(maze.endCell[0], maze.endCell[1], 'Goal', 'red');\r\n      }\r\n\r\n      prizes.forEach(prize => {\r\n       const {cell, image, isTaken, points, takenTime} = prize;\r\n\r\n        if (isTaken && (new Date() - takenTime) <= 3000)\r\n          generateText(cell[0], cell[1], `+${points}`, 'yellow');\r\n        else if(!isTaken)\r\n          generateImage(cell[0], cell[1], image);\r\n      });\r\n    };\r\n\r\n    draw();\r\n\r\n    return () => {\r\n      didCancel = true;\r\n    };\r\n  }, [ctx, currentCell, maze, displayGoal, prizes]);\r\n\r\n  useInterval(() => {\r\n    setDisplayGoal(oldDisplayState => !oldDisplayState);\r\n  }, 1000);\r\n\r\n  return (\r\n    <div className={styles.root}>\r\n      <canvas className={styles.canvas} ref={canvas} />\r\n    </div>\r\n  );\r\n}\r\n\r\nBoard.propTypes = {\r\n  maze: PropTypes.shape({\r\n    cols: PropTypes.number.isRequired,\r\n    rows: PropTypes.number.isRequired,\r\n    cells: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.bool)).isRequired,\r\n    currentCell: PropTypes.arrayOf(PropTypes.number),\r\n    forwardedRef: PropTypes.object,\r\n  }),\r\n};\r\n\r\nexport default Board;\r\n","import { useEffect, useRef } from 'react';\r\n\r\nconst noop = () => {};\r\n\r\nexport function useKey(keys, action) {\r\n  const actionRef = useRef(noop);\r\n  actionRef.current = action;\r\n\r\n  useEffect(() => {\r\n    const onKeyDown = (event) => {\r\n      if (keys.includes(event.key)) {\r\n        event.preventDefault();\r\n        if (actionRef.current) {\r\n          actionRef.current(event);\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', onKeyDown);\r\n\r\n    return () => window.removeEventListener('keydown', onKeyDown);\r\n  }, [keys]);\r\n}\r\n","import React from 'react';\r\n// import PropTypes from 'prop-types';\r\nimport clsx from 'clsx';\r\nimport styles from './Joystick.module.css';\r\nimport { KEYBOARD } from '../../utils/constants';\r\n\r\nfunction Joystick({ handleOnArrowKeyPressed }) {\r\n  return (\r\n    <div className={styles.root}>\r\n      <div\r\n        className={clsx(styles.button, styles.left)}\r\n        onClick={() => handleOnArrowKeyPressed({ key: KEYBOARD.Left })}\r\n      >\r\n        <i className={clsx(styles.arrow, styles.leftArrow)} />\r\n      </div>\r\n      <div\r\n        className={clsx(styles.button, styles.right)}\r\n        onClick={() => handleOnArrowKeyPressed({ key: KEYBOARD.Right })}\r\n      >\r\n        <i className={clsx(styles.arrow, styles.rightArrow)} />\r\n      </div>\r\n      <div\r\n        className={clsx(styles.button, styles.top)}\r\n        onClick={() => handleOnArrowKeyPressed({ key: KEYBOARD.Up })}\r\n      >\r\n        <i className={clsx(styles.arrow, styles.upArrow)} />\r\n      </div>\r\n      <div\r\n        className={clsx(styles.button, styles.bottom)}\r\n        onClick={() => handleOnArrowKeyPressed({ key: KEYBOARD.Down })}\r\n      >\r\n        <i className={clsx(styles.arrow, styles.downArrow)} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Joystick;\r\n","import React, { useCallback, useEffect, useReducer, useRef } from 'react';\r\nimport styles from './App.module.css';\r\nimport useInterval from '@use-it/interval';\r\nimport Header from '../../components/Header/Header';\r\nimport Notification from '../../components/Notification/Notification';\r\nimport MazeGenerator from '../../maze/MazeGenerator';\r\nimport Board from '../Board/Board';\r\nimport {\r\n  COLS,\r\n  KEYBOARD,\r\n  MAZE_PRIZES,\r\n  MOVEMENT_REWARD,\r\n  ROUND_TIME,\r\n  ROWS,\r\n} from '../../utils/constants';\r\nimport { useKey } from '../../hooks/useKey';\r\nimport mazeAudioFile from '../../assets/audio/maze.mp3';\r\nimport mazeLevelEndAudioFile from '../../assets/audio/level_end.mp3';\r\nimport { arraysEqual } from '../../utils/arrayUtils';\r\nimport Joystick from '../Joystick/Joystick';\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case 'startGame': {\r\n      return {\r\n        ...state,\r\n        maze: action.payload.maze,\r\n        currentCell: action.payload.maze.startCell,\r\n        time: ROUND_TIME,\r\n        visitedCells: new Set(),\r\n        isGoalReached: false,\r\n        prizes: [],\r\n      };\r\n    }\r\n    case 'reachGoal': {\r\n      return {\r\n        ...state,\r\n        isGoalReached: true,\r\n        points: state.points + state.round * state.time * 100,\r\n      };\r\n    }\r\n    case 'winGame': {\r\n      return {\r\n        ...state,\r\n        maze: action.payload.maze,\r\n        currentCell: action.payload.maze.startCell,\r\n        time: ROUND_TIME,\r\n        round: state.round + 1,\r\n        visitedCells: new Set(),\r\n        isGoalReached: false,\r\n        prizes: [],\r\n      };\r\n    }\r\n    case 'decrementTime': {\r\n      return {\r\n        ...state,\r\n        time: state.time - 1,\r\n      };\r\n    }\r\n    case 'endGame': {\r\n      return {\r\n        ...state,\r\n        hiScore: Math.max(state.hiScore, state.points),\r\n        points: 0,\r\n      };\r\n    }\r\n    case 'addPrize': {\r\n      const index = action.payload.index;\r\n\r\n      const prize = {\r\n        ...MAZE_PRIZES[index],\r\n        isTaken: false,\r\n        cell: state.maze.randomCells[index],\r\n      };\r\n\r\n      return {\r\n        ...state,\r\n        prizes: [...state.prizes, prize],\r\n      };\r\n    }\r\n    case 'reachPrize': {\r\n      const index = action.payload.removeIndex;\r\n\r\n      return {\r\n        ...state,\r\n        points: state.points + (!state.prizes[index].isTaken ? state.prizes[index].points : 0),\r\n        prizes: state.prizes.map((p, idx) =>\r\n          idx === index ? { ...p, isTaken: true, takenTime: new Date() } : p\r\n        ),\r\n      };\r\n    }\r\n    case 'moveCharacter': {\r\n      const isVisited = state.visitedCells.has(action.payload.cells.toString());\r\n\r\n      return {\r\n        ...state,\r\n        currentCell: action.payload.cells,\r\n        points: state.points + (!isVisited ? MOVEMENT_REWARD : 0),\r\n        visitedCells: new Set([...state.visitedCells, action.payload.cells.toString()]),\r\n      };\r\n    }\r\n    default:\r\n      throw new Error('Unknown action');\r\n  }\r\n}\r\n\r\nconst mazeAudio = new Audio(mazeAudioFile);\r\nmazeAudio.loop = true;\r\n// mazeAudio.volume = 0.3;\r\n\r\nconst levelEndAudio = new Audio(mazeLevelEndAudioFile);\r\n\r\nfunction App() {\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    points: 0,\r\n    round: 1,\r\n    hiScore: 0,\r\n    time: undefined,\r\n    maze: undefined,\r\n    currentCell: undefined,\r\n    visitedCells: new Set(),\r\n    isGoalReached: false,\r\n    prizes: [],\r\n  });\r\n\r\n  const container = useRef(null);\r\n\r\n  const isGameOver = !state.time;\r\n\r\n  const handleOnEnterKeyPressed = useCallback(() => {\r\n    if (!state.time) {\r\n      dispatch({\r\n        type: 'startGame',\r\n        payload: {\r\n          maze: new MazeGenerator(ROWS, COLS, MAZE_PRIZES.length).generate(),\r\n        },\r\n      });\r\n    }\r\n  }, [state.time]);\r\n\r\n  const handleOnArrowKeyPressed = useCallback(\r\n    (event) => {\r\n      if (!state.currentCell || !state.maze || isGameOver || state.isGoalReached) return;\r\n      const { isValid, newPos } = state.maze.validateStep(state.currentCell, event.key);\r\n\r\n      if (isValid) {\r\n        const prizeIndex = state.prizes.findIndex((prize) => arraysEqual(prize.cell, newPos));\r\n        if (prizeIndex >= 0) {\r\n          dispatch({\r\n            type: 'reachPrize',\r\n            payload: {\r\n              removeIndex: prizeIndex,\r\n            },\r\n          });\r\n        } else if (state.maze.isGoalReached(newPos)) {\r\n          dispatch({\r\n            type: 'reachGoal',\r\n          });\r\n        }\r\n        dispatch({\r\n          type: 'moveCharacter',\r\n          payload: {\r\n            cells: newPos,\r\n          },\r\n        });\r\n      }\r\n    },\r\n    [state.currentCell, state.maze, isGameOver, state.isGoalReached, state.prizes]\r\n  );\r\n\r\n  useKey([KEYBOARD.Enter], handleOnEnterKeyPressed);\r\n  useKey([KEYBOARD.Left, KEYBOARD.Right, KEYBOARD.Up, KEYBOARD.Down], handleOnArrowKeyPressed);\r\n\r\n  useInterval(\r\n    () => {\r\n      dispatch({ type: 'decrementTime' });\r\n    },\r\n    state.time && !state.isGoalReached ? 1000 : null\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (state.time === 0) {\r\n      mazeAudio.pause();\r\n      mazeAudio.currentTime = 0;\r\n      dispatch({ type: 'endGame' });\r\n    } else if (ROUND_TIME - state.time === 30) {\r\n      dispatch({\r\n        type: 'addPrize',\r\n        payload: { index: 0 }, // Lolippop\r\n      });\r\n    } else if (state.time === 15) {\r\n      dispatch({\r\n        type: 'addPrize',\r\n        payload: { index: 1 }, // Ice Cream\r\n      });\r\n    }\r\n  }, [state.time]);\r\n\r\n  useEffect(() => {\r\n    if (state.round > 0 && state.time > 0 && !state.isGoalReached) {\r\n      mazeAudio.play();\r\n    }\r\n  }, [state.round, state.time, state.isGoalReached]);\r\n\r\n  useEffect(() => {\r\n    const onFinishAudio = () => {\r\n      levelEndAudio.currentTime = 0;\r\n      dispatch({\r\n        type: 'winGame',\r\n        payload: {\r\n          maze: new MazeGenerator(ROWS, COLS, MAZE_PRIZES.length).generate(),\r\n        },\r\n      });\r\n    };\r\n\r\n    if (state.isGoalReached) {\r\n      mazeAudio.pause();\r\n      mazeAudio.currentTime = 0;\r\n\r\n      levelEndAudio.play();\r\n      levelEndAudio.addEventListener('ended', onFinishAudio);\r\n    }\r\n\r\n    return () => levelEndAudio.removeEventListener('ended', onFinishAudio);\r\n  }, [state.isGoalReached]);\r\n\r\n  return (\r\n    <div className={styles.root}>\r\n      <Header hiScore={state.hiScore} points={state.points} time={state.time} round={state.round} />\r\n      <div className={styles.container} ref={container}>\r\n        <Board\r\n          maze={state.maze}\r\n          currentCell={state.currentCell}\r\n          prizes={state.prizes}\r\n          forwardedRef={container}\r\n        />\r\n        <Joystick handleOnArrowKeyPressed={handleOnArrowKeyPressed} />\r\n      </div>\r\n      <Notification show={!state.time} gameOver={state.time === 0} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './containers/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}